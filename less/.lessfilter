#!/bin/sh

case "$1" in
	*.iso)
		isoinfo -l -i "$1"
		;;
	*.sqfs)
		unsquashfs -l "$1"
		;;
	*.docx | *.DOCX)
		docx2txt "$1" -
		;;
	*.xlsx | *.XLSX)
		xlsx2csv "$1"
		;;
  *.pdf | *.PDF)
		pdftotext -nopgbrk -layout -eol unix "$1" -
		;;
	*.ps | *.PS)
		ps2ascii "$1"
		;;
	*.md | *.MD)
		mdless "$1"
		;;
	*.md.gz | *.MD.gz | *.MD.GZ)
		gzip -cd "$1" | mdless -
		;;
	*.tpxz)
		pixz -l "$1"
		;;
	*.org)
		pandoc -t markdown "$1" | mdless
		;;
	*.html | *.HTML)
		w3m "$1"
		;;
	*.torrent)
		aria2c -S "$1"
		;;
	*.mp4 | *.mkv)
		mediainfo "$1"
		;;
	*)
		# We don't handle this format.
		exit 127
		;;
esac

# No further processing by lesspipe necessary
exit 0
