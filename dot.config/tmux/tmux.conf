unbind C-b
set -g prefix C-a

bind C-a send-prefix
bind a last-window
bind C-p previous-window
bind C-n next-window

unbind C-r
bind C-r source-file $XDG_CONFIG_HOME/tmux/tmux.conf \; \
		display "source-file done."
bind r respawn-pane
bind s choose-session
bind C-s new-session
bind M-s setw synchronize-panes 
bind c new-window -c "#{pane_current_path}"
bind |  split-window -hc "#{pane_current_path}"
bind \\ split-window -hc "#{pane_current_path}"
bind -  split-window -vc "#{pane_current_path}"

unbind '"'
unbind %

unbind l
unbind h
unbind j
unbind k
bind h select-pane -L
bind l select-pane -R
bind j select-pane -D
bind k select-pane -U

bind Enter resize-pane -Z

unbind C-j
unbind C-k
unbind C-l
unbind C-h
bind C-j resize-pane -D 1
bind C-k resize-pane -U 1
bind C-l resize-pane -R 1
bind C-h resize-pane -L 1

unbind ^
unbind v
unbind <
bind ^ resize-pane -U 99
bind v resize-pane -D 99
bind < resize-pane -L 99

bind-key C-b break-pane
unbind J
bind-key J command-prompt -p "join pane from:"  "join-pane -s '%%'"

# HELP
bind-key F1 new-window -n HELP 'clear && tpp .HELP.tpp' 
bind-key F2 new-window -n Tut-cli 'clear && tpp .cmd.tpp' 
bind-key F3 new-window -n Tut-nano 'clear && ttyplay -s2 .nano.ttyrec' 
bind-key F4 new-window -n Tut-usb 'clear && ttyplay -s2 .usb.ttyrec' 

# ttyrec (have to manually start 'ttyrec' before using this key)
bind-key g new-window -n ttyrec 'clear && bash ~/.tmp.sh' \;\
	split-window \; resize-pane -U 5 

# gtd
bind-key T new-session -d 'pkill gtd; gtd -s 25'

#--Usability--------------------------------------------------------------------

set -g history-limit 50000
set -s escape-time 0
set -g display-time 4000
setw -g aggressive-resize on
set -g focus-events on
set -g window-size largest
setw -g  xterm-keys on
setw -g   mode-keys vi
set  -g status-keys emacs
setw -g monitor-activity on
set  -g  visual-activity on
set -g default-command bash

#### Status-Bar
set -g status-style bg=default
setw -g window-status-style fg=default,dim
setw -g window-status-current-style fg=default,bold
set -g status-interval 5
set -g automatic-rename on
set -g status-left-length 30
set -g status-left-style fg=colour172
set -g status-left '[#(whoami)@#h:#S] '
set -g status-right '#[fg=colour170]#(cat /tmp/gtd) #[fg=colour130]#(cut -d" " -f1 < /proc/loadavg) #(cat /sys/class/power_supply/BAT?/capacity)% #[fg=colour100]%F %R %a'

set -g default-terminal "tmux-256color"

# Needed for updating plugins
# setenv -g http_proxy '127.0.0.1:1081'
# setenv -g https_proxy '127.0.0.1:1081'

# https://github.com/tmux-plugins/tpm
# https://github.com/tmux-plugins/tpm/blob/master/docs/tpm_not_working.md
# https://github.com/tmux-plugins/tpm/blob/master/docs/changing_plugins_install_dir.md
set-environment -g TMUX_PLUGIN_MANAGER_PATH ${XDG_CONFIG_HOME}/tmux/plugins/
# List of plugins
set -g @tpm_plugins '
	tmux-plugins/tpm
	tmux-plugins/tmux-copycat
	tmux-plugins/tmux-yank
	tmux-plugins/tmux-open
'
#	tmux-plugins/tmux-sensible

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
#run -b '~/.tmux/plugins/tpm/tpm'
run -b ${XDG_CONFIG_HOME}/tmux/plugins/tpm/tpm
# 'C-a U' to update plugins
# 'C-a M-u' to uninstall, or just remove the respective dir.

##### Docs
# http://blog.hawkhost.com/2010/07/02/tmux-%E2%80%93-the-terminal-multiplexer-part-2/
# https://wiki.archlinux.org/index.php/Tmux
