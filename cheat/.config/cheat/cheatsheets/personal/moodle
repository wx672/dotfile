# batch uploading Users

1. export a xlsx file from jw.swfu.edu.cn:8089 with only name and studid in it
	
	> id,name

2. make a csv file

	```sh
	# username,password,email,group1,cohort1,type1,lastname,firstname
	xlsx2csv 232401-net-20221152.xlsx | \ 
	awk -F, '{print $1","$1"," $1"@232401.net,232401-net,232401-net,1,"$2}' \
	> 232401-net.csv
	```

3. add a new cohort (232401-net) in moodle -> site admin -> users -> cohorts

	https://cs6.swfu.edu.cn/moodle/cohort/edit.php?contextid=1

4. site admin -> users -> upload users (csv file)

5. Course -> Participants -> enrolment methods -> cohort sync


# Enroll a cohort into a course

In course page: Administration -> Course Administration -> Users -> Enrolment methods -> Add method -> Cohort sync

# update from git

```sh
sudo git pull
# and then checkout the new version
```

# plugin install

# site backup

- https://docs.moodle.org/402/en/Site_backup

```sh
cd /my/backup/directory

mv moodle-database.sql.gz moodle-database-old.sql.gz

mysqldump --default-character-set=utf8mb4 -u moodleuser --password=mypassword -C -Q -e --create-options moodle > moodle-database.sql

gzip moodle-database.sql
```
