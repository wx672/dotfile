#!/bin/bash
#https://www.reddit.com/r/commandline/comments/41cnge/command_line_wikipedia/

# _w(){
#     COMPREPLY=($(grep -h "^${COMP_WORDS[COMP_CWORD]}" /usr/share/dict/words))
#     return 0
# }
# complete -F _w w

engine=$1
shift
# Escape spaces for URL
a="$*"
q=${a// /+}

case "$engine" in
    s) req="https://duckduckgo.com/?q=$q";;
    g) req="https://google.com/search?q=$q";;
    l) req="https://google.com/search?q=$q&btnI=";;
    w) req="https://en.wikipedia.org/w/index.php?title=Special:Search&search=$q&go=Go";;
    d) req="https://dictionary.reference.com/browse/$q";;
    # Add many more, then chose a default below:
    *) $0 l $engine $@; exit 0;;
esac

w3m -dump "$req" | more
