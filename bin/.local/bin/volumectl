#!/bin/bash

# This script is supposed to be invoked via hotkeys defined in dwm

gdbar() {
  awk -F"[][]" '/Left:/ { print $2 }' <(amixer get Master) |
    dzen2-gdbar -h '30' |
    dzen2 -p 1 -h '40' -w '90' -x '1820'
}

case $1 in
  get)
    amixer get Master
    exit
    ;;
  inc)
    amixer -q set Master 1%+ && gdbar
    exit
    ;;
  dec)
    amixer -q set Master 1%- && gdbar
    exit
    ;;
  mute)
    amixer -q set Master toggle
    exit
    ;;
  *)
    echo ${0##*/} 'get|inc|dec|mute'
    exit 1
    ;;
esac
